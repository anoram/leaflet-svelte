import{w as o,S as t,i as e,s as n,v as s,x as a,y as i,e as r,g as l,h as p,c,a as d,d as m,j as u,l as h,b as f,f as g,o as $,z as k,p as y,r as w,u as x,A as z,B as T}from"./client.cad504f2.js";const C=o(!1),Z=o(!1);function b(o,t,e){let n,r;s(o,C,o=>e(2,n=o)),s(o,Z,o=>e(3,r=o));const l=a();let p={},c="";return i(()=>{n&&l("ready"),r||(Z.set(!0),function(o,t,e){let n=o.length;function s(){n=--n,n<1&&e()}t()?e():o.forEach(({type:o,url:t,options:e={async:!0,defer:!0}})=>{const n="script"===o,a=document.createElement(n?"script":"link");n?(a.src=t,a.async=e.async,a.defer=e.defer):(a.rel="stylesheet",a.href=t),a.onload=s,document.body.appendChild(a)})}([{type:"style",url:"https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"},{type:"script",url:"https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"}],()=>!1,()=>(p=window.L,c=p.map,C.set(!0),!0)))}),o.$$.update=()=>{4&o.$$.dirty&&n&&l("ready")},[]}class L extends t{constructor(o){super(),e(this,o,b,null,n,{})}}const{window:v}=z;function M(o){let t,e,n,s,a,i;return n=new L({}),n.$on("ready",o[1]),{c(){t=r("div"),e=l(),p(n.$$.fragment),this.h()},l(o){t=c(o,"DIV",{class:!0,id:!0}),d(t).forEach(m),e=u(o),h(n.$$.fragment,o),this.h()},h(){f(t,"class","map svelte-1xdqv5q"),f(t,"id",o[0])},m(r,l){g(r,t,l),o[7](t),g(r,e,l),$(n,r,l),s=!0,a||(i=k(v,"resize",o[2]),a=!0)},p(o,e){(!s||1&e[0])&&f(t,"id",o[0])},i(o){s||(y(n.$$.fragment,o),s=!0)},o(o){w(n.$$.fragment,o),s=!1},d(s){s&&m(t),o[7](null),s&&m(e),x(n,s),a=!1,i()}}}function S(o,t,e){let n={},s="";const i=a();let r,l,{options:p}=t,{zoom:c=13,maxZoom:d=19,minZoom:m=1,mapID:u="map",attributionControl:h=!0,center:f=[0,0],markers:g,circles:$,recenter:k=!1,scrollWheelZoom:y=!0,tilelayers:w=[{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}],controls:x={zoomControl:!0,position:"topleft",scale:!1}}=p,z=[],C=[],Z={iconUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[1,-34],shadowSize:[41,41]};function b(o,t){o.bindPopup(t.text,{closeOnClick:!1,autoClose:!1,...t}).addTo(s),t.isOpen&&o.openPopup()}function L(o,t){o.bindTooltip(t.text,{...t}).addTo(s),t.isOpen&&o.openTooltip()}let v=[];const M=o=>{o.markers.map((o,t)=>{o.icon&&(r=n.icon(o.icon)),v[t]=new n.marker([o.lat,o.lng],{icon:r}).addTo(s),o.popup&&b(v[t],o.popup),o.tooltip&&L(v[t],o.tooltip)})};let S=!1;return o.$$set=o=>{"options"in o&&e(3,p=o.options)},[u,function(){setTimeout(()=>{n=window.L,function(){s=n.map(u,{attributionControl:h,zoomControl:x.zoomControl,minZoom:m,maxZoom:d}).setView(f,c),v=n.marker([0,0]),w&&w.map(o=>{n.tileLayer(o.url,{...o}).addTo(s)});y||s.scrollWheelZoom.disable();let o=n.control;x.zoomControl||o().remove();x.scale&&o.scale({position:x.position}).addTo(s);x.zoomControl&&x.position&&(s.removeControl(s.zoomControl),o.zoom({position:x.position}).addTo(s));g&&g.map(o=>{z.push([o.lat,o.lng]),r=o.icon?n.icon(o.icon):n.icon(Z);let t=new n.marker([o.lat,o.lng],{icon:r});o.popup&&b(t,o.popup),o.tooltip&&L(t,o.tooltip),t.addTo(s)});$&&$.map(o=>{C.push([o.lat,o.lng]);let t=new n.circle([o.lat,o.lng],{...o});o.popup&&b(t,o.popup),o.tooltip&&L(t,o.tooltip),t.addTo(s)});k&&(1==z.length?(s.panTo(n.latLng(z[0][0],z[0][1])),s.setZoom(c)):(l=new n.LatLngBounds(z),s.fitBounds(l)))}(),i("ready")},1)},function(){s&&s.invalidateSize()},p,M,o=>{S||(M(o),S=!0),o.markers.map((o,t)=>{v[t].setLatLng(o).update(),v[t].addTo(s)})},(o=5)=>{s.setZoom(o)},function(o){T[o?"unshift":"push"](()=>{u=o,e(0,u)})}]}class A extends t{constructor(o){super(),e(this,o,S,M,n,{options:3,addMarker:4,updateMarkers:5,setZoom:6},[-1,-1])}get addMarker(){return this.$$.ctx[4]}get updateMarkers(){return this.$$.ctx[5]}get setZoom(){return this.$$.ctx[6]}}export{A as L};
